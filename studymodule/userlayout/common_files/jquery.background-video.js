(function(a){a("html").addClass("js");if(!Date.now){Date.now=function(){return new Date().getTime()}}function b(){return Math.floor(Date.now()/1000)}a.fn.bgVideo=function(f){function c(){if(/iP(hone|od|ad)/.test(navigator.platform)){var h=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(h[1],10),parseInt(h[2],10),parseInt(h[3]||0,10)]}}var d=c();var e=false;if(d&&(d[0]<10)){e=true}var g=a.extend({},a.fn.bgVideo.defaults,f);return this.each(function(){var j=a(this);var o=j[0];var m=j.attr("poster")||"";var h=j.parent();var i=a('<button class="jquery-background-video-pauseplay pause"><span>Pause</span></button>');var n;var l=a.extend({},g);var k=j.data();a.each(k,function(p,q){if(p.indexOf("bgvideo")===0){p=p.replace("bgvideo","");p=p.charAt(0).toLowerCase()+p.slice(1);l[p]=q}});j.on("playing",function(){if(n==null){n=b()}j.addClass("is-playing is-visible");i.removeClass("play").addClass("pause").find("span").text("Pause");a.fn.bgVideo.fitVideo(j)});if(o.currentTime>0){j.addClass("is-playing is-visible")}j.on("pause",function(){j.removeClass("is-playing");i.removeClass("pause").addClass("play").find("span").text("Play");if(l.fadeOnPause){j.removeClass("is-visible")}});h.css({position:"relative",overflow:"hidden","background-size":"cover","background-position":"center center","background-repeat":"no-repeat","background-image":"url("+m+")"});j.css({"min-width":"auto","min-height":"auto",width:"100%",height:"auto",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"});if(l.fullScreen){h.css({position:"fixed",top:"0",bottom:"0",left:"0",right:"0",height:"auto",margin:"0","z-index":"-1"})}j.css("transition-duration",l.fadeIn+"ms");if(e){j.attr("src","");j.find("source").attr("src","");j.remove()}a.fn.bgVideo.fitVideo(j);a(window).resize(function(){a.fn.bgVideo.fitVideo(j)});l.pauseAfter=parseInt(l.pauseAfter,10);if(l.pauseAfter>0){j.on("timeupdate",function(){var p=b();if(p>n+l.pauseAfter){o.pause();if(l.fadeOnEnd){j.removeClass("is-visible")}}})}if(l.showPausePlay&&!e){h.append(i);i.css({left:"auto",right:"auto",top:"auto",bottom:"auto"});i.css(l.pausePlayXPos,l.pausePlayXOffset);i.css(l.pausePlayYPos,l.pausePlayYOffset);if(l.pausePlayXPos==="center"){i.css({left:"50%","margin-left":"-10px"})}if(l.pausePlayYPos==="center"){i.css({top:"50%","margin-top":"-10px"})}i.on("click",function(){if(o.paused){o.play();n=b()}else{o.pause()}})}})};a.fn.bgVideo.defaults={fullScreen:false,fadeIn:500,pauseAfter:120,fadeOnPause:false,fadeOnEnd:true,showPausePlay:true,pausePlayXPos:"right",pausePlayYPos:"top",pausePlayXOffset:"15px",pausePlayYOffset:"15px"};a.fn.bgVideo.fitVideo=function(d){var c=d.parent(),e=c.outerHeight(),f=c.outerWidth();d.css({height:"auto",width:f+"px"});var g=d.height();if(e>g){d.css({height:e+"px",width:"auto"})}};a(document).ready(function(){a("[data-bgvideo]").bgVideo()})}(jQuery));