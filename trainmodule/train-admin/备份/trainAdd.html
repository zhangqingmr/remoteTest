<!DOCTYPE html>

<html lang="en" class="no-js windows desktop">
<!--<![endif]-->
<!-- BEGIN HEAD -->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">

    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
    
    
    <link href="css/components.css" id="style_components" rel="stylesheet" type="text/css">
   

    <title>试题组成</title>
    <link href="css/common.css" rel="stylesheet" type="text/css">
    
    <link href="css/awesome-bootstrap-checkbox.min.css" rel="stylesheet" type="text/css">
   
    <link href="css/question-min.css" rel="stylesheet" type="text/css">
    <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="css/questionAdd.css" rel="stylesheet" type="text/css">
    <script src='js/jquery.min.js'></script>
    <script src='js/vue.js'></script>
    <link href="css/layui.css" rel="stylesheet" type="text/css">
    <script src="js/layui.js"></script>
    

    <style  type="text/css">
        [v-cloak] {
            display: none;
        }
    </style>
</head>
<!--新的样式-->




<body>

    <div class="page-container ">

        <div class="page-content-wrapper">
            <div class="page-content " id='app'  style="min-height:922px" cloak>
                


                <!-- 头部信息-->
                    <div class="row">
                        <div class="col-md-12">
                            <p class="exam-title pull-left">添加试题到试卷: {{exam.title}}</p>
                            <div style="width: 250px" class="pull-right">

                            </div>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="select-question-panel">
                                <div class="tabbable-line">
                                    <!-- <div class="group-mode clearfix">
                                        <span class="group-mode-title">
                                            组卷方式 </span>
                                        <ul class="nav nav-tabs questions-sources" data-standlone="0" style="float: left">
                                            <li class="active">
                                                <a href="javasricpt:;">
                                                    <img class="concentric-circle-checked" src="images/radio_checked.png" alt="">
                                                    <img class="concentric-circle" src="images/radio_unchecked.png" alt=""> 固定试题组卷 </a>
                                            </li>
                                            
                                            
                                        </ul>
                                    </div> -->
                                    <div class="tab-content" style="min-height: 671px;">
                                        <!--    -->
                                        <div class="tab-pane fade  in active " id="qs-pre-select">

                                            <div class="qts-pre-select-question">

                                                <div class="table-toolbar pre-exam-toolbar">
                                                    <div class="row">
                                                        <div class="col-sm-12 col-xs-12 col-md-12">

                                                            <div class="btn-groups show">
                                                                <div class="pull-left">
                                                                    <div class="checker" style="display: inline-block">
                                                                        <span>
                                                                            <input id='checkAll-zq' type="checkbox" class="group-checkable" data-set="" @change='checkedAll(),isSelected()'>
                                                                        </span>
                                                                    </div>
                                                                    <a id='addQuestion' href="javascript:;"
                                                                        class="btn yks-blue">
                                                                        <i class="fa fa-plus fa-lg"></i>&nbsp; 添加试题 </a>
                                                                    <a id='deleteQuestion'  href="javascript:;"
                                                                        class="btn yks-yellow-default" @click="deleteMany()">
                                                                        <i class="fa fa-trash"></i>
                                                                        删除试题 </a>
                                                                    
                                                                   
                                                                </div>


                                                            </div>
                                                            
                                                        </div>
                                                    </div>
                                                    

                                                </div>
                                         <!--    固定试题  内容区域    -->      
                                                <div class="dataTables_wrapper no-footer" style="overflow: hidden">
                                                    
                                                        <div class="table-responsive table-scrollable" style="overflow: hidden">
                                                          
                                                            <table class="table table-condensed table-hover" id="questionList" role="grid" aria-describedby="sample_1_info">
                                                                <thead>

                                                                </thead>
                                                                <tbody id="questions-list">
                                                                    <tr  v-for='(question,index) in questions' >
                                                                        <td width="30" style='padding-left:20px'>
                                                                            <div class="checker">
                                                                                <span class="">
                                                                                    <input type="checkbox"  :id='question.qid' @change='checkedSome(question)' class="checkboxes"
                                                                                        value="">
                                                                                </span>
                                                                            </div>
                                                                        </td>
                                                                        <td class="score" data-score="1" data-qscore="1">
                                                                            <div class="regular-ques" >
                                                                                <div class="right-bottom-btns">
                                                                                    <!-- <a  href="javascript:;"
                                                                                        type="button" class="btn operation-btn "
                                                                                        title="设为附加题" draggable="false">
                                                                                        <i class="fa fa-plus-square" aria-hidden="true"></i>
                                                                                    </a>
                                                                                    <a data-action="edit-question" type="button"
                                                                                        class="btn operation-btn" title="编辑"
                                                                                        qid="12333024" draggable="false">
                                                                                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                                                                                    </a> -->
                                                                                    <a  @click='deleteSingle(question)' type="button"
                                                                                        class="btn operation-btn" title="删除试题"
                                                                                        qid="" draggable="false">
                                                                                        <i class="fa fa-times-circle" aria-hidden="true"></i>
                                                                                    </a>
                                                                                </div>
                                                                                <!-- <span class="right-top-tips">拖动可以改变试题显示顺序</span> -->
                                                                                <div class="row question"
                                                                                    qindex="1">
                                                                                    <div class="col-xs-12  col-sm-12 col-md-12">
                                                                                        <div class="row">
                                                                                            <div class="col-xs-12">
                                                                                                <div class="row-box row-ques-detail">
                                                                                                    <p class="ques-title need-max-height">
                                                                                                        <!--Regular if156-->
                                                                                                        <span class="ques-number">{{index+1}}/{{allCount}}</span>

                                                                                                        <span class="ques-type ques-single">{{question.qtypename}}</span>
                                                                                                     
                                                                                                        <span>
                                                                                                            <span style="color:#333333">
                                                                                                                <font size="2">
                                                                                                                    <span style="font-family:arial">{{question.title}}</span>
                                                                                                                </font>
                                                                                                            </span>
                                                                                                        </span>

                                                                                                        
                                                                                                       
                                                                                                    </p>

                                                                                                    <div class="question-option-list" style='display: none'>
                                                                                                            <div>
                                                                                                                <ol>
                                                                                                                    <li v-for='(option,index) in question.options'>
                                                                                                                        <span style="color:#333333"><font size="2"><span style="font-family:arial">{{option.sort}}.{{option.title}}</span></font></span>
                                                                                                                    </li>
                                                                                                                  
                                                                                                                </ol>
                                                                                                            </div>
                                                                                                    </div>

                                                                                                    <div class="ques-answers detail-dom">
                                                                                                       

                                                                                                        <a @click.stop='zhankai($event)'>展开
                                                                                                            <i class="fa fa-angle-down"></i>
                                                                                                        </a>
                                                                                                        <div  class="detail_result wrong" style='display: none' >
                                                                                                                    <div class="detailSetting">
                                                                                                                        <p><ul class="settings">
                                                                                                        
                                                                                                                            </ul>
                                                                                                                        </p>
                                                                                                                    </div>
                                                                                                                    <div class="detailAnswer">
                                                                                                                        <p>正确答案: <strong>{{question.rightAnswer}}</strong></p>
                                                                                                                    </div>
                                                                                                                
                                                                                                                <div style="clear: both;"></div>
                                                                                                        </div>
                                                                                                        <div class="question-analysis detail-analysis " style='display: none'>
                                                                                                                题目解析:  <span>{{question.feedback}}</span>
                                                                                                        </div>
                                                                                                        <div class="detailLabel">
                                                                                                            <p>
                                                                                                                <span class="labels other"
                                                                                                                    title="分类">{{question.catname}}</span>
                                                                                                                <span
                                                                                                                    class="labels other"
                                                                                                                    title="作者">{{question.createUser}}</span>
                                                                                                                <span
                                                                                                                    class="labels other">更新于：{{question.updateTime}}</span>
                                                                                                            </p>
                                                                                                        </div>

                                                                                                    </div>

                                                                                                    <div class="pack-label">
                                                                                                      
                                                                                                    </div>

                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                           
                                                                        </td>
                                                                    </tr>
                                                                    
                                                                </tbody>
                                                              
                                                            </table>

                                                        </div>
                                                    </form>
                                                </div>
                                        <!--   随机试题    内容区域   -->
                                      
                                            </div>
                                        </div>
                                      
                                      
                                       
                                    </div>
                                </div>

                            </div>
                           
                        </div>
                    </div>
                <!--   底部跳转试题    -->
                    <div class="row" style="margin-top: 20px;padding-bottom: 20px">
                        <div class="col-md-12">
                            <div class="qs-actions">
                                <a href="javascript:;"  class="btn yks-blue" id="step2">
                                    <i class="fa fa-check fa-lg"></i>
                                    保存 </a>
                                
                            </div>
                        </div>
                    </div>
                    
                    
            </div>
        </div>



<script>
    var app=new Vue({
        el:'#app',
        data:{
            exam:{'exid':'','catid':'','catName':'','selectQuestionType':'0','selectQuesTypeText':'','status':'','statusText':'','desc':'','startTime':'','':'',
            'endTime':'', 'imgUrl':'','keywords':'','createTime':'','createTime':'','createUser':'','createUserName':'','updateUser':'','updateUserName':'','enabled':'','enabledName':'',

                 
                'questions':[],'randomCatS':[],'title':'请填写标题','examTime':'0','examScore':'0','count':'0','part':'0'},
            questions:[],
            hasSingle:false,
            hasMore:false,
            hasTK:false,
            hasYD:false,
            selectId:[],
            questionSon:[],
            
            
        },  
        methods:{
         
            zhankai2:function(e){
                var target=e.target
                var m=$(target).siblings(".fa").hasClass('fa-angle-up')
                console.log(m)
                
                if(!m){
                    $(target).html('收缩')
                    $(target).siblings('.fa').addClass("fa-angle-up");
                    $(target).siblings('.fa').removeClass("fa-angle-down");
                    $(target).parent().siblings(".selected-category-expand-details").css('display','block');
                  
                }else{
                    $(target).html('展开')
                    $(target).siblings('.fa').addClass("fa-angle-down");
                    $(target).siblings('.fa').removeClass("fa-angle-up");
                    $(target).parent().siblings(".selected-category-expand-details").css('display','none');
                }
                
                
                
            },
            zhankai:function(e){
                var target=e.target
                var m=$(target).parent().hasClass('ques-answers')
                if(m){
                    var a=$(target).siblings('.wrong').css('display');
                if(a=='none'){
                    $(target).html('收缩<i class="fa fa-angle-up"></i>')
                    $(target).siblings('.wrong').css('display','block');
                    $(target).siblings('.question-analysis ').css('display','block');
                    $(target).parent().siblings('.question-option-list').css('display','block');
                }else{
                    
                    $(target).html('展开<i class="fa fa-angle-down"></i>');
                    $(target).siblings('.wrong').css('display','none');
                    $(target).siblings('.question-analysis ').css('display','none');
                    $(target).parent().siblings('.question-option-list').css('display','none');
                }
                }
                
                
            },
           
            isSelected:function(){
                    if(app.selectId.length!=0){
                        app.isSelect=true;
                    }else{
                        app.isSelect=false;
                    }
                 },
                 checkedSome:function(question){
                     //点击checkbox，判断是不是对勾
                     
                            var is= $("#"+question.qid).prop("checked")
                   
                            if(is){
                                //是 push
                                app.selectId.push(question.qid);
                            }else{
                                $("#checkAll-zq").prop("checked",false);
                                //不是，判断有这个Id吗，从id去掉
                                if(app.selectId.indexOf(question.qid)!=-1){
                                    for(var i=0;i<app.selectId.length;i++){
                                        if(app.selectId[i]==question.qid){
                                            app.selectId.splice(i,1)
                                        }
                                    }
                                    
                                }
                            }
                     
                    
                   
                 },
                 checkedAll:function(){
                     //全选
                     var is=$("#checkAll-zq").prop("checked");
                   
                            if(is){
                                
                                for(var i=0;i<app.questions.length;i++){
                                    //改变所有对勾的状态为true
                                    $("#"+app.questions[i].qid).prop("checked",true);
                                    //在selectId中没有时候，才加入
                                    if(app.selectId.indexOf(app.questions[i].qid)==-1){
                                        app.selectId.push(app.questions[i].qid);
                                    }
                                }
                            }else{
                                
                                for(var i=0;i<app.questions.length;i++){
                                    //改变所有对勾状态为false
                                    $("#"+app.questions[i].qid).prop("checked",false);
                                    //在selectId中去掉
                                    app.selectId.splice(app.questions[i],1)
                                    }
                            }
                   
                     
                         
                 },
            
            
                 deleteMany:function(){
                    
                                if(app.selectId.length==0){
                                alert('至少勾选一项')
                            }else{
                                for(var i=0;i<app.selectId.length;i++){
                                    
                                    for(var k=0;app.questions.length;k++){
                                        
                                        if(app.questions[k].qid==app.selectId[i]){
                                            app.selectId.splice(i,1)
                                            app.questions.splice(k,1);
                                            
                                            break;
                                        }
                                    }

                                }
                                $("input[type='checkbox']").prop('checked',false)
                            }
                     
                     
                 },
                 
                 deleteSingle:function(question){
                     var m=question.qid
                     for(var k=0;app.questions.length;k++){
                                  if(app.questions[k].qid==m){
                                     app.questions.splice(k,1)
                                     break;
                                  }
                              }
                              $("input[type='checkbox']").prop('checked',false)
                 }
            
        },
        computed:{
            allCount:function(){
               
                    return this.questions.length;
              
               
            },
           
        }

    })
</script>
<script src='js/questionAdd.js'></script>














</body>

</html>